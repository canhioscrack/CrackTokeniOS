
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CanhiOS - Qu√©t To√†n B·ªô Token Base64 Trong .dylib</title>
  <style>
    body {
      background: #0d0d0d;
      color: #00ffaa;
      font-family: monospace;
      padding: 30px;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: #1a1a1a;
      border: 2px solid #00ffaa;
      border-radius: 15px;
      padding: 30px;
    }
    input[type="file"], button {
      padding: 10px 20px;
      margin: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background: #00ffaa;
      color: #000;
      cursor: pointer;
      font-weight: bold;
    }
    #result {
      margin-top: 20px;
      background: #111;
      border-radius: 8px;
      padding: 20px;
      text-align: left;
      white-space: pre-wrap;
      word-break: break-word;
    }
    .token-box {
      margin: 10px 0;
      padding: 10px;
      background: #000;
      border: 1px solid #00ffaa;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .token-box code {
      color: #00ffaa;
      font-size: 14px;
    }
    .copy-btn {
      background: #00ffaa;
      color: #000;
      padding: 5px 10px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: bold;
      cursor: pointer;
      margin-left: 15px;
    }
  </style>

<style>
#buttonNotify {
  position: fixed;
  top: 20px;
  right: 20px;
  background: #00ffaa;
  color: #000;
  padding: 10px 20px;
  border-radius: 8px;
  font-weight: bold;
  z-index: 9999;
  display: none;
  box-shadow: 0 0 10px #00ffaa;
}
</style>
<div id="buttonNotify">üîî Thao t√°c</div>


<style>
#copyAlert {
  position: fixed;
  top: 60px;
  right: 20px;
  background: #00ffaa;
  color: #000;
  padding: 10px 20px;
  border-radius: 8px;
  font-weight: bold;
  z-index: 9999;
  display: none;
  box-shadow: 0 0 10px #00ffaa;
}
</style>
<div id="copyAlert">üìã Token ƒë√£ ƒë∆∞·ª£c copy!</div>


<style>
body *:not(script):hover {
  transition: box-shadow 0.2s ease-in-out;
  box-shadow: 0 0 8px #00ffaa !important;
}
</style>


<style>
textarea.token-input {
  width: 95%;
  min-height: 60px;
  resize: both;
  border: 2px solid #00ffaa;
  border-radius: 10px;
  background: #111;
  color: #00ffaa;
  font-family: monospace;
  font-size: 14px;
  padding: 10px;
  box-sizing: border-box;
}
</style>

</head>
<body>
  <div class="container" style="position: relative;">
<div id="particles-js" style="width:100%; height:100%; pointer-events: none; position: absolute; top: 0; left: 0; z-index: 0;"></div>

    <h2>üì¶ CanhiOS Tool: Qu√©t To√†n B·ªô Token Base64 Trong file .dylib</h2>
    <input type="file" id="dylibFile" accept=".dylib">
    <button onclick="showNotify('ƒê√£ nh·∫•n n√∫t: Qu√©t Token');scanTokens()">üîç Qu√©t Token</button>
    <div id="result">Token t√¨m ƒë∆∞·ª£c s·∫Ω hi·ªán ·ªü ƒë√¢y...
<hr style="margin:40px 0; border: 1px dashed #00ffaa;">
<h3>‚úèÔ∏è Thay th·∫ø Token</h3>
<textarea id="oldToken" class="token-input" style="width:95%; resize: both; min-height: 50px; border-radius: 10px; border: 2px solid #00ffaa; background: #111; color: #00ffaa;" placeholder="Token g·ªëc trong file..." style="width:80%; padding:10px; border-radius:6px;"></textarea><div id="infoOld" style="color:#00ffaa; margin-top:5px;"></div>
<div id="infoOld" style="color:#00ffaa; margin-top:5px;"></div>

<br><br>
<textarea id="newToken" class="token-input" placeholder="Token m·ªõi ƒë·ªÉ thay th·∫ø..." style="width:95%; resize: both; min-height: 50px; border-radius: 10px; border: 2px solid #00ffaa; background: #111; color: #00ffaa;" placeholder="Token m·ªõi ƒë·ªÉ thay th·∫ø..." style="width:80%; padding:10px; border-radius:6px;"></textarea><div id="infoNew" style="color:#00ffaa; margin-top:5px;"></div>
<div id="infoOld" style="color:#00ffaa; margin-top:5px;"></div>

<br><br>
<button onclick="showNotify('ƒê√£ nh·∫•n n√∫t: Thay & T·∫£i file m·ªõi');replaceToken()">üíæ Thay & T·∫£i file m·ªõi</button>


<div style="text-align:center; margin-top:50px; font-size:16px; color:#00ffaa; font-weight:bold;">
  ¬©CheckToken By CanhiOS
</div>

</div>
  </div>

  <script>
    function scanTokens() {
      const file = document.getElementById("dylibFile").files[0];
      if (!file) return alert("Vui l√≤ng ch·ªçn file .dylib");

      const reader = new FileReader();
      reader.onload = function(e) {
        const bytes = new Uint8Array(e.target.result);
        let text = '';
        for (let i = 0; i < bytes.length; i++) {
          const byte = bytes[i];
          if (byte >= 32 && byte <= 126) {
            text += String.fromCharCode(byte);
          } else {
            text += ' ';
          }
        }

        const base64Regex = /[A-Za-z0-9+/=]{60,}/g;
        const matches = [...new Set(text.match(base64Regex))]; // Remove duplicates

        
        const result = document.getElementById("result");
        if (!matches || matches.length === 0) {
          result.innerHTML = "‚ùå Kh√¥ng t√¨m th·∫•y token base64 n√†o!";
          return;
        }

        result.innerHTML = `‚úÖ T√¨m th·∫•y ${matches.length} token base64:<br><br>`;
        result.innerHTML += `
<input type="text" id="searchToken" placeholder="üîç T√¨m token ch·ª©a ƒëo·∫°n..." style="margin-top:10px; padding:8px; width:60%; font-size:14px; border-radius:6px; border:2px solid #00ffaa; background:#111; color:#00ffaa;" oninput="filterTokens()">
`;
        matches.forEach((token, idx) => {
          const offset = text.indexOf(token);
          const hexOffset = '0x' + offset.toString(16).toUpperCase();
          result.innerHTML += `
            <div class="token-box">
              <div style='display:flex; flex-direction: column; width:100%'>
                <div style="color:#66ff99; font-size:13px; padding-bottom:5px;">
                  üìç Offset: <b>${hexOffset}</b> | üî¢ ƒê·ªô d√†i: <b>${token.length} k√Ω t·ª±</b>
                </div>
                <div style='display:flex; justify-content:space-between; align-items:center;'>
                  <code>${token}</code>
                  <button class="copy-btn" onclick="copyToken('${token}')">üìã Copy</button>
                </div>
              </div>
            </div>
          `;
        });

      };
      reader.readAsArrayBuffer(file);
    }
  
function replaceToken() {
  const oldToken = document.getElementById("oldToken").value.trim();
  const newToken = document.getElementById("newToken").value.trim();
  const fileInput = document.getElementById("dylibFile");
  if (!fileInput.files[0]) return alert("Ch∆∞a c√≥ file ƒë·ªÉ x·ª≠ l√Ω.");
  if (!oldToken || !newToken) return alert("Vui l√≤ng nh·∫≠p c·∫£ token g·ªëc v√† m·ªõi.");
  if (oldToken.length !== newToken.length) return alert("Token m·ªõi ph·∫£i c√πng ƒë·ªô d√†i v·ªõi token g·ªëc!");

  const reader = new FileReader();
  reader.onload = function(e) {
    const bytes = new Uint8Array(e.target.result);
    const encoder = new TextEncoder();
    const oldBytes = encoder.encode(oldToken);
    const newBytes = encoder.encode(newToken);

    let offset = -1;
    for (let i = 0; i <= bytes.length - oldBytes.length; i++) {
      let found = true;
      for (let j = 0; j < oldBytes.length; j++) {
        if (bytes[i + j] !== oldBytes[j]) {
          found = false;
          break;
        }
      }
      if (found) {
        offset = i;
        break;
      }
    }

    if (offset === -1) return alert("‚ùå Kh√¥ng t√¨m th·∫•y token g·ªëc trong file!");

    for (let j = 0; j < newBytes.length; j++) {
      bytes[offset + j] = newBytes[j];
    }

    const blob = new Blob([bytes], {type: "application/octet-stream"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "patched_token.dylib";
    a.click();
  };
  reader.readAsArrayBuffer(fileInput.files[0]);
}


function showNotify(msg) {
  const n = document.getElementById("buttonNotify");
  n.innerText = "üîî " + msg;
  n.style.display = "block";
  setTimeout(() => { n.style.display = "none"; }, 2500);
}


function showCopyAlert() {
  const a = document.getElementById("copyAlert");
  a.style.display = "block";
  setTimeout(() => { a.style.display = "none"; }, 2000);
}


function copyToken(token) {
  navigator.clipboard.writeText(token);
  showCopyAlert();
}


function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>

<!-- Particles.js -->
<div id="particles-js" style="z-index:-1; pointer-events: none;" style="z-index:0;"></div>
<style>
#particles-js {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
}
</style>
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js">
function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>
<script>
particlesJS("particles-js", {
  "particles": {
    "number": { "value": 220, "density": { "enable": true, "value_area": 800 } },
    "color": { "value": "#00ffaa" },
    "shape": {
      "type": "circle",
      "stroke": { "width": 0, "color": "#000" },
      "polygon": { "nb_sides": 6 }
    },
    "opacity": {
      "value": 0.5, "random": false,
      "anim": { "enable": false }
    },
    "size": {
      "value": 3,
      "random": true,
      "anim": { "enable": false }
    },
    "line_linked": {
      "enable": true,
      "distance": 110,
      "color": "#00ffaa",
      "opacity": 0.45,
      "width": 1.2
    },
    "move": {
      "enable": true,
      "speed": 1.5,
      "direction": "none",
      "random": false,
      "straight": false,
      "out_mode": "bounce",
      "bounce": true
    }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": {
      "onhover": { "enable": true, "mode": "repulse" },
      "onclick": { "enable": true, "mode": "push" },
      "resize": true
    },
    "modes": {
      "repulse": { "distance": 100, "duration": 0.4 },
      "push": { "particles_nb": 6 }
    }
  },
  "retina_detect": true
});

function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>


<script src="https://unpkg.com/snowstorm@latest/snowstorm-min.js">
function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>
<script>
snowStorm.flakesMax = 100;
snowStorm.flakesMaxActive = 90;
snowStorm.animationInterval = 25;
snowStorm.useTwinkleEffect = true;
snowStorm.snowCharacter = "‚ùÑ";
snowStorm.flakeColor = "#ffffff";

function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>


<script>
function showTokenInfo(id, infoId, fileBytes) {
  const val = document.getElementById(id).value.trim();
  const infoDiv = document.getElementById(infoId);
  if (!val || val.length < 20) {
    infoDiv.innerText = "";
    return;
  }

  let offset = -1;
  if (fileBytes && val.length >= 60) {
    const encoder = new TextEncoder();
    const valBytes = encoder.encode(val);
    for (let i = 0; i <= fileBytes.length - valBytes.length; i++) {
      let found = true;
      for (let j = 0; j < valBytes.length; j++) {
        if (fileBytes[i + j] !== valBytes[j]) {
          found = false;
          break;
        }
      }
      if (found) {
        offset = i;
        break;
      }
    }
  }

  const hexOffset = offset >= 0 ? '0x' + offset.toString(16).toUpperCase() : 'Kh√¥ng t√¨m th·∫•y trong file';
  
    if (id === "oldToken") {
      infoDiv.innerText = `üìè ƒê·ªô d√†i c·ªßa Token G·ªëc: ${val.length} k√Ω t·ª± ` + (offset >= 0 ? `| üìç Offset: ${hexOffset}` : "");
    } else if (id === "newToken") {
      infoDiv.innerText = `üìè ƒê·ªô d√†i c·ªßa Token Thay Th·∫ø: ${val.length} k√Ω t·ª± ` + (offset >= 0 ? `| üìç Offset: ${hexOffset}` : "");
    }
    
}

let loadedBytes = null;
document.getElementById("dylibFile").addEventListener("change", function(e) {
  const reader = new FileReader();
  reader.onload = function(evt) {
    loadedBytes = new Uint8Array(evt.target.result);
  };
  reader.readAsArrayBuffer(e.target.files[0]);
});

document.getElementById("oldToken").addEventListener("input", () => showTokenInfo("oldToken", "infoOld", loadedBytes));
document.getElementById("newToken").addEventListener("input", () => showTokenInfo("newToken", "infoNew", loadedBytes));

function filterTokens() {
  const search = document.getElementById("searchToken").value.toLowerCase();
  const boxes = document.querySelectorAll(".token-box");
  boxes.forEach(box => {
    const code = box.querySelector("code").innerText.toLowerCase();
    box.style.display = code.includes(search) ? "flex" : "none";
  });
}

</script>

</body>
</html>
